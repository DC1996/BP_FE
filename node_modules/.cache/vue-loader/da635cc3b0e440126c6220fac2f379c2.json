{"remainingRequest":"/home/dc/Documents/BP/vue-bp-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/dc/Documents/BP/vue-bp-web/src/components/createtaskpage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/dc/Documents/BP/vue-bp-web/src/components/createtaskpage.vue","mtime":1649663681042},{"path":"/home/dc/Documents/BP/vue-bp-web/node_modules/cache-loader/dist/cjs.js","mtime":1642114936856},{"path":"/home/dc/Documents/BP/vue-bp-web/node_modules/babel-loader/lib/index.js","mtime":1642114938312},{"path":"/home/dc/Documents/BP/vue-bp-web/node_modules/cache-loader/dist/cjs.js","mtime":1642114936856},{"path":"/home/dc/Documents/BP/vue-bp-web/node_modules/vue-loader/lib/index.js","mtime":1642114938760}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCiAgICBpbXBvcnQgeyB0b2tlbml6ZSwgVG9rZW4gfSBmcm9tICIuLi9teWZpbGVzL3Rva2VuaXplci5qcyIKICAgIGltcG9ydCB7IHBhcnNlTWF0aExhbmcsIFF1ZXN0aW9uLCBDb25jcmV0ZVRhc2ssIFZhcmlhYmxlIH0gZnJvbSAiLi4vbXlmaWxlcy90YXNrSGFuZGxlciIKICAgIGltcG9ydCB7IEV4dHJhY3RvciB9IGZyb20gIi4uL215ZmlsZXMvZXh0cmFjdG9yTW9kdWxlIjsKCiAgICBpbXBvcnQgVGFza0RhdGFTZXJ2aWNlIGZyb20gIi4uL3NlcnZpY2VzL3Rhc2tEYXRhU2VydmljZSI7CiAgICBpbXBvcnQgR2VuZXJhdG9yU2VydmljZSBmcm9tICIuLi9zZXJ2aWNlcy9nZW5lcmF0b3JTZXJ2aWNlIjsKICAgIGltcG9ydCBDYXRlZ29yeURhdGFTZXJ2aWNlIGZyb20gIi4uL3NlcnZpY2VzL2NhdGVnb3J5RGF0YVNlcnZpY2UuanMiOwoKICAgIGltcG9ydCAqIGFzIG1hdGggZnJvbSAnbWF0aGpzJzsKaW1wb3J0IHRlc3REYXRhU2VydmljZSBmcm9tICcuLi9zZXJ2aWNlcy90ZXN0RGF0YVNlcnZpY2UuanMnOwoKICAgIGV4cG9ydCBkZWZhdWx0IHsKICAgICAgICBkYXRhKCkgeyAgIAogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgdGFza0NhdGVnb3JpZXM6IFtdLAogICAgICAgICAgICAgICAgc2VsZWN0ZWRUYXNrQ2F0ZWdvcmllczogW10sCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIG5hbWU6ICJOZXcgVGFzayIsCiAgICAgICAgICAgICAgICB0YXNrTmFtZTogIiIsCiAgICAgICAgICAgICAgICB0YXNrR3JhZGU6IG51bGwsCiAgICAgICAgICAgICAgICB0ZXh0OiAiIiwKICAgICAgICAgICAgICAgIHRhc2tfdGV4dDogIiIsCgogICAgICAgICAgICAgICAgZm9ybXVsYTogJyQkeCA9IHstYiBcXHBtIFxcc3FydHtiXjItNGFjfSBcXG92ZXIgMmF9LiQkJywKCiAgICAgICAgICAgICAgICBleHRfdGV4dDogbmV3IEV4dHJhY3RvcigpLAogICAgICAgICAgICAgICAgcHJldmlldzogbmV3IENvbmNyZXRlVGFzaygpLAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IFtdLAogICAgICAgICAgICAgICAgcXVlc3Rpb25zOiBbXSwKICAgICAgICAgICAgICAgIGFuc3dlcnM6IFtdLAoKICAgICAgICAgICAgICAgIG92ZXJsYXlWOiBmYWxzZSwKICAgICAgICAgICAgICAgIG92ZXJsYXlBOiBmYWxzZSwKICAgICAgICAgICAgICAgIG92ZXJsYXlBZGRWOiBmYWxzZSwKICAgICAgICAgICAgICAgIG92ZXJsYXlTYXZlOiBmYWxzZSwKICAgICAgICAgICAgICAgIHRhc2tPdmVybGF5OiBmYWxzZSwKICAgICAgICAgICAgICAgIGhlbHBEaWFsb2c6IGZhbHNlLAogICAgICAgICAgICAgICAgaW5kZXhWOiAwLAogICAgICAgICAgICAgICAgaW5kZXhBVjogMCwKICAgICAgICAgICAgICAgIGluZGV4QTogMCwKICAgICAgICAgICAgfTsKICAgICAgICB9LAogICAgICAgIGNvbXB1dGVkOiB7CiAgICAgICAgICAgIGdldFRleHQoKSB7IHJldHVybiB0aGlzLnRleHQ7IH0KICAgICAgICB9LAoKICAgICAgICAvLyBMb2FkIHRhc2sgZGVwZW5kaW5nIG9uIG5hdmlnYXRpb24gb3JpZ2luCiAgICAgICAgYmVmb3JlTW91bnQoKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJ0YXNrSWQgZnJvbSByb3V0ZSBwYXJhbXMiLCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGFza0lkJykpCgogICAgICAgICAgICAvLyBNb2RpZnkgd2FzIHNlbGVjdGVkIGZyb20gdGFzayBoaXN0b3J5CiAgICAgICAgICAgIGlmKCB0aGlzLiRyb3V0ZS5wYXJhbXMudGFza0lkICkgCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIC8vIFNhdmUgaWQgdG8gbG9jYWxTdG9yYWdlLCBzbyB3ZSBjYW4gcmVsb2FkIHBhZ2Ugd2l0aG91dCBsb3NzaW5nIHRoZSBpZAogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rhc2tJZCcsIHRoaXMuJHJvdXRlLnBhcmFtcy50YXNrSWQpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIElkIHdhcyBzYXZlZCBmcm9tIHJvdXRlIHBhcmFtcyBvciBpZiB0aGUgcGFnZSB3YXMgcmVsb2FkZWQKICAgICAgICAgICAgaWYgKCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGFza0lkJykgKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAvLyBMb2FkIHRoZSB0YXNrIGNvbnRlbnQgZnJvbSB0aGUgZGF0YWJhc2UKICAgICAgICAgICAgICAgIFRhc2tEYXRhU2VydmljZS5nZXQobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rhc2tJZCcpKQogICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5hbWUgPSByZXMuZGF0YS5uYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YXNrTmFtZSA9IHJlcy5kYXRhLm5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhc2tHcmFkZSA9IHJlcy5kYXRhLmdyYWRlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5leHRfdGV4dC50YXNrID0gcGFyc2VNYXRoTGFuZyhyZXMuZGF0YS5jb250ZW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5kYXRhLmNhdGVnb3JpZXMuZm9yRWFjaCgoe25hbWV9KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFRhc2tDYXRlZ29yaWVzLnB1c2gobmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUkVDSUVWRUQ6ICcsIHJlcy5kYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzaG93TWVzc2FnZScsIHsgbWVzc2FnZTogIlBhcnNpbmcgc3VjY2Vzc2Z1bCEiIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzaG93TWVzc2FnZScsIHsgbWVzc2FnZTogZXJyb3IubWVzc2FnZSwgc3VjY2VzczogZmFsc2UgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5leHRfdGV4dC50YXNrID0gcGFyc2VNYXRoTGFuZyhyZXMuZGF0YS5jb250ZW50KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGV4dCA9IHRoaXMuZXh0X3RleHQudGFzay50ZXh0LnRyaW0oKTsKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsgCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JIYW5kbGVyKGVycm9yKTsgCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIEdldCBjYXRlZ29yaWVzCiAgICAgICAgICAgIENhdGVnb3J5RGF0YVNlcnZpY2UuZ2V0QWxsKCkudGhlbigoe2RhdGF9KSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLnRhc2tDYXRlZ29yaWVzID0gZGF0YS5tYXAoKHtuYW1lfSkgPT4gbmFtZSk7CiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKCiAgICAgICAgbW91bnRlZCgpIHsgfSwKCiAgICAgICAgY3JlYXRlZCgpIHsgfSwKCiAgICAgICAgbWV0aG9kczogewoKICAgICAgICAgICAgZ2V0Q2F0ZWdvcmllcygpIHsKICAgICAgICAgICAgICAgIENhdGVnb3J5RGF0YVNlcnZpY2UuZ2V0QWxsKCkudGhlbigoe2RhdGF9KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXNrQ2F0ZWdvcmllcyA9IGRhdGEubWFwKCh7bmFtZX0pID0+IG5hbWUpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICByZXBsYWNlQW5zd2VycyhfcVRleHQpIHsKCiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGxldCBjbGVhblRleHQgPSBfcVRleHQucmVwbGFjZUFsbChUb2tlbi50eXBlcy5nQW5zd2VyLCAiIikucmVwbGFjZUFsbCgiPSIsICIiKS50cmltKCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hdGgucGFyc2UoY2xlYW5UZXh0KS50b1RleCgpOwogICAgICAgICAgICAgICAgfSBjYXRjaChlcnJvcikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfcVRleHQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICB0ZXN0ZXh0KCkgewogICAgICAgICAgICAgICAgLy8gVGVzdCBleHRyYWN0aW9uCiAgICAgICAgICAgICAgICB0aGlzLmV4dF90ZXh0LmV4dHJhY3RWYXJpYWJsZSh0b2tlbml6ZSh0aGlzLnRleHQpKTsKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIGFzeW5jIGNyZWF0ZU5ld1Rhc2soKSAKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgLy8gUHJlcGFyZSBkYXRhIGZvciBzZW5kaW5nCiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHsgbmFtZTogdGhpcy50YXNrTmFtZSwgZ3JhZGU6IHRoaXMudGFza0dyYWRlLCBjb250ZW50OiB0aGlzLmV4dF90ZXh0LmdlbmVyYXRlVGV4dCgpIH07CgogICAgICAgICAgICAgICAgLy8gQ3JlYXRlIG5ldyBlbnRyeSBpbiBkYXRhYmFzZQogICAgICAgICAgICAgICAgaWYgKCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGFza0lkJykgPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIHRyeXsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5ld1Rhc2sgPSBhd2FpdCBUYXNrRGF0YVNlcnZpY2UuY3JlYXRlKGRhdGEpOwoKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rhc2tJZCcsIG5ld1Rhc2suZGF0YS5pZCk7CgogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnNlbGVjdGVkVGFza0NhdGVnb3JpZXMpOwoKICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBzZWxlY3RlZENhdGVnb3J5IG9mIHRoaXMuc2VsZWN0ZWRUYXNrQ2F0ZWdvcmllcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNhdGVnb3J5ID0gYXdhaXQgQ2F0ZWdvcnlEYXRhU2VydmljZS5maW5kKHtuYW1lOiBzZWxlY3RlZENhdGVnb3J5fSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3Nob3dNZXNzYWdlJywgeyBtZXNzYWdlOiAiVGFzayBzYXZlZCBzdWNjZXNzZnVseSIgfSk7CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaChlcnJvcikgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBsb2cKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3Nob3dNZXNzYWdlJywgeyBtZXNzYWdlOiBlcnJvci5yZXNwb25zZS5kYXRhLm1lc3NhZ2UsIHN1Y2Nlc3M6IGZhbHNlIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gVXBkYXRlIGV4aXN0aW5nIGVudHJ5CiAgICAgICAgICAgICAgICBlbHNlIHsgICAgCgogICAgICAgICAgICAgICAgICAgIGxldCB0YXNrSWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGFza0lkJyk7CiAgICAgICAgICAgICAgICAgICAgbGV0IHRhc2sgPSBhd2FpdCBUYXNrRGF0YVNlcnZpY2UuZ2V0KHRhc2tJZCk7CgogICAgICAgICAgICAgICAgICAgIHRyeXsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGVsZXRlIGVhY2ggY2F0ZWdvcnkgb24gdGhlIHRhc2sKICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBjYXRlZ29yeSBvZiB0YXNrLmRhdGEuY2F0ZWdvcmllcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgVGFza0RhdGFTZXJ2aWNlLnJlbW92ZUNhdGVnb3J5KHsgdGFza0lkOiB0YXNrSWQsIGNhdGVnb3J5SWQ6IGNhdGVnb3J5LmlkIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaChlcnJvcikgewogICAgICAgICAgICAgICAgICAgICAgICAvLwogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiRXJyb3Igd2hpbGUgZGVsZXRpbmcgY2F0ZWdvcmllcyBmcm9tIHRhc2siKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIC8vIEFkZCBlYWNoIHNlbGVjdGVkQ2F0ZWdvcnkgdG8gdGFzawogICAgICAgICAgICAgICAgICAgIGZvcihsZXQgc2VsZWN0ZWRDYXRlZ29yeSBvZiB0aGlzLnNlbGVjdGVkVGFza0NhdGVnb3JpZXMpIHsKCiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGaW5kIGNhdGVnb3J5IGlkIGluIERCCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2F0ZWdvcnkgPSBhd2FpdCBDYXRlZ29yeURhdGFTZXJ2aWNlLmZpbmQoe25hbWU6IHNlbGVjdGVkQ2F0ZWdvcnl9KTsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCBjYXRlZ29yeSB0byB0YXNrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBUYXNrRGF0YVNlcnZpY2UuYWRkQ2F0ZWdvcnkoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0YXNrSWQ6IHRhc2tJZCwgY2F0ZWdvcnlJZDogY2F0ZWdvcnkuZGF0YS5pZCB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2goZXJyb3IpIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgY2F0ZWdvcnkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjYXRlZ29yeSA9IGF3YWl0IENhdGVnb3J5RGF0YVNlcnZpY2UuY3JlYXRlKHtuYW1lOiBzZWxlY3RlZENhdGVnb3J5fSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCBjYXRlZ29yeSB0byB0YXNrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBUYXNrRGF0YVNlcnZpY2UuYWRkQ2F0ZWdvcnkoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0YXNrSWQ6IHRhc2tJZCwgY2F0ZWdvcnlJZDogY2F0ZWdvcnkuZGF0YS5pZCB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICApCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkFkZGVkIik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgoKICAgICAgICAgICAgICAgICAgICBUYXNrRGF0YVNlcnZpY2UudXBkYXRlKCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGFza0lkJyksIGRhdGEgKSAKICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOiAieW91clRhc2tzIn0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3Nob3dNZXNzYWdlJywgeyBtZXNzYWdlOiByZXMuZGF0YS5tZXNzYWdlIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3Nob3dNZXNzYWdlJywgeyBtZXNzYWdlOiBlcnIucmVzcG9uc2UuZGF0YS5tZXNzYWdlLCBzdWNjZXNzOiBmYWxzZSB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIHZhcmlhYmxlSW5mbyA6IGZ1bmN0aW9uKGkpIHsKICAgICAgICAgICAgICAgIHRoaXMuaW5kZXhWID0gaQogICAgICAgICAgICAgICAgdGhpcy5vdmVybGF5ViA9IHRydWUKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYWRkZWRWYXJpYWJsZUluZm86IGZ1bmN0aW9uKGkpIHsKICAgICAgICAgICAgICAgIHRoaXMuaW5kZXhBViA9IGkKICAgICAgICAgICAgICAgIHRoaXMub3ZlcmxheUFkZFYgPSB0cnVlOwogICAgICAgICAgICB9LAogICAgICAgICAgICBhbnN3ZXJJbmZvOiBmdW5jdGlvbihpKSB7CiAgICAgICAgICAgICAgICB0aGlzLmluZGV4QSA9IGkKICAgICAgICAgICAgICAgIHRoaXMub3ZlcmxheUEgPSB0cnVlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHByZXZpZXdUYXNrOiBmdW5jdGlvbiAoKSB7CgogICAgICAgICAgICAgICAgR2VuZXJhdG9yU2VydmljZQogICAgICAgICAgICAgICAgICAgIC5nZW5lcmF0ZSggeyBjb250ZW50OiB0aGlzLmV4dF90ZXh0LnRhc2sgfSApCiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByZXZpZXcgPSByZXMuZGF0YS5jb250ZW50OwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSByZXMuZGF0YS5tZXNzYWdlOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN1Y2Nlc3MgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluZm9NZXNzYWdlID0gdHJ1ZTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFza092ZXJsYXkgPSB0cnVlCgogICAgICAgICAgICAgICAgICAgICAgICAvL2luaXRNYXRoSmF4KHt9LCAoKSA9PiB7IHJlbmRlckJ5TWF0aGpheChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFzaycpKTsgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdkYXRhJywgdGhpcy5leHRfdGV4dC5nZW5lcmF0ZVRleHQoKSApOwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0gZXJyPy5yZXNwb25zZT8uZGF0YT8ubWVzc2FnZSB8fCBlcnIubWVzc2FnZTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdWNjZXNzID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5mb01lc3NhZ2UgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9LAogICAgICAgICAgICBzYXZlVGV4dDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZGF0YScsIHRoaXMudGV4dCk7CgogICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVOZXdUYXNrKCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHJlc3RvcmVUZXh0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIC8vIFRPRE8gPwogICAgICAgICAgICB9LAoKCiAgICAgICAgICAgIC8vIFZhcmlhYmxlcwogICAgICAgICAgICBhZGRWYXJpYWJsZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBsZXQgbmV3VmFyaWFibGUgPSBuZXcgVmFyaWFibGUoIiRuZXdWYXIiKTsKICAgICAgICAgICAgICAgIG5ld1ZhcmlhYmxlLmFkZGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdGhpcy5leHRfdGV4dC50YXNrLnZhcmlhYmxlcy5wdXNoKG5ld1ZhcmlhYmxlKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2V0VmFyaWFibGVOYW1lOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICB0aGlzLmV4dF90ZXh0LnRhc2sudmFyaWFibGVzW3RoaXMuaW5kZXhWXS5uYW1lID0gZS50YXJnZXQuaW5uZXJUZXh0OwogICAgICAgICAgICB9LAogICAgICAgICAgICByZW1vdmVWYXJpYWJsZTogZnVuY3Rpb24oaSkgewogICAgICAgICAgICAgICAgdGhpcy5leHRfdGV4dC50YXNrLnZhcmlhYmxlcy5zcGxpY2UoaSwgMSk7CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICAvLyBRdWVzdGlvbnMKICAgICAgICAgICAgYWRkUXVlc3Rpb246IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgdGhpcy5leHRfdGV4dC50YXNrLnF1ZXN0aW9ucy5wdXNoKG5ldyBRdWVzdGlvbigpKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcmVtb3ZlUXVlc3Rpb246IGZ1bmN0aW9uKGkpIHsKICAgICAgICAgICAgICAgIHRoaXMuZXh0X3RleHQudGFzay5xdWVzdGlvbnMuc3BsaWNlKGksIDEpOwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgLy8gQW5zd2VycwogICAgICAgICAgICBhZGRDb3JyZWN0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHRoaXMuZXh0X3RleHQudGFzay5hbnN3ZXJzW3RoaXMuaW5kZXhBXS5jb3JyZWN0LnB1c2gobmV3IFN0cmluZygiIikpOwogICAgICAgICAgICB9LAogICAgICAgICAgICByZW1vdmVDb3JyZWN0OiBmdW5jdGlvbihpKSB7CiAgICAgICAgICAgICAgICB0aGlzLmV4dF90ZXh0LnRhc2suYW5zd2Vyc1t0aGlzLmluZGV4QV0uY29ycmVjdC5zcGxpY2UoaSwgMSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFkZEluY29ycmVjdDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB0aGlzLmV4dF90ZXh0LnRhc2suYW5zd2Vyc1t0aGlzLmluZGV4QV0uaW5jb3JyZWN0LnB1c2gobmV3IFN0cmluZygiIikpOwogICAgICAgICAgICB9LAogICAgICAgICAgICByZW1vdmVJbmNvcnJlY3Q6IGZ1bmN0aW9uKGkpIHsKICAgICAgICAgICAgICAgIHRoaXMuZXh0X3RleHQudGFzay5hbnN3ZXJzW3RoaXMuaW5kZXhBXS5pbmNvcnJlY3Quc3BsaWNlKGksIDEpOwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgcGFyc2VUZXh0IDogZnVuY3Rpb24gKCkgewoKICAgICAgICAgICAgICAgIC8vIFRFWFQKICAgICAgICAgICAgICAgIHRoaXMuZXh0X3RleHQudGFzay50ZXh0ID0gdGhpcy50ZXh0OwoKICAgICAgICAgICAgICAgIGxldCB0b2tlbnMgPSB0b2tlbml6ZSh0aGlzLnRleHQpOwoKICAgICAgICAgICAgICAgIC8vIFZBUklBQkxFUwogICAgICAgICAgICAgICAgdGhpcy52YXJpYWJsZXMgPSB0aGlzLmV4dF90ZXh0LmV4dHJhY3RWYXJpYWJsZXModG9rZW5zKTsKCiAgICAgICAgICAgICAgICAvLyBBTlNXRVJTCiAgICAgICAgICAgICAgICB0aGlzLmFuc3dlcnMgPSB0aGlzLmV4dF90ZXh0LmV4dHJhY3RBbnN3ZXJzKHRva2Vucyk7CgogICAgICAgICAgICAgICAgLy8gRXh0cmFjdCBhbnN3ZXIgZnJvbSBlYWNoIHF1ZXN0aW9uCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIEFzc3VtZSBsaXN0IG9mIHZhcmlhYmxlcyBoYXMgY2hhbmdlZAogICAgICAgICAgICAgICAgLy8gYW5kIHNldCB2aXNpYmxpdHkgdG8gZmFsc2UgZm9yIGFsbCB2YXJpYWJsZXMKICAgICAgICAgICAgICAgIHRoaXMuZXh0X3RleHQudGFzay5hbnN3ZXJzLmZvckVhY2goKGFuc3dlcikgPT4gewogICAgICAgICAgICAgICAgICAgIGFuc3dlci52aXNpYmxlID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIC8vIFFVRVNUSU9OUwogICAgICAgICAgICAgICAgdGhpcy5leHRfdGV4dC50YXNrLnF1ZXN0aW9ucy5mb3JFYWNoKChxdWVzdGlvbikgPT4gewoKICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdRJyxxdWVzdGlvbik7CiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyh0b2tlbml6ZSgiUTogIiwgcXVlc3Rpb24udGV4dCkpOwoKICAgICAgICAgICAgICAgICAgICB0aGlzLmV4dF90ZXh0LmV4dHJhY3RBbnN3ZXJzKHRva2VuaXplKHF1ZXN0aW9uLnRleHQpKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIHRyeXsKICAgICAgICAgICAgICAgICAgICBsZXQgZ2VuZXJhdGVkX3RleHQgPSB0aGlzLmV4dF90ZXh0LmdlbmVyYXRlVGV4dCgpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzaG93TWVzc2FnZScsIHttZXNzYWdlOiAiU3VjY2Vzc2Z1bHkgZXZhbHVhdGVkISJ9KTsKICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGdlbmVyYXRlZF90ZXh0KTsKICAgICAgICAgICAgICAgIH0gY2F0Y2goZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3Nob3dNZXNzYWdlJywge21lc3NhZ2U6IGVyci5tZXNzYWdlLCBzdWNjZXNzOiBmYWxzZX0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9ICAgICAKICAgICAgICB9CiAgICB9Cg=="},{"version":3,"sources":["createtaskpage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0TA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"createtaskpage.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <v-container id=\"task\" class=\"d-flex flex-column justify-start align-center mt-2 pb-0 b-g rounded-lg\" style=\"position: relative;\">\n\n        <v-btn elevation=\"1\" large color=\"primary\" icon style=\"position: absolute; left: 0.5rem; background-color: white\"\n            class=\"px-6 py-2 mx-2 no-uppercase\" @click=\"helpDialog = true\"> \n            <v-icon>mdi-help-circle-outline</v-icon>\n        </v-btn>\n\n        <!-- Task name -->        \n        <h4 class=\"text-h5 custom-font my-4 font-weight-medium\"> {{ this.name }} </h4>\n\n        <v-container fluid rounded label=\"Task\" class=\"d-flex flex-row\" style=\"height: 100%;\">\n\n            <!-- Left side -->\n            <v-col cols=\"16\" class=\"mx-2 py-0 px-2 ma-0 d-flex flex-column justify-start\">\n\n            <!-- Task text text-field -->\n            <div class=\"d-flex flex-column justify-start flex-grow-0\">\n                <h3 class=\"ml-2 mb-1\"> Task text </h3>\n                <v-textarea text-narrow spellcheck=\"false\" background-color=\"white\" color=\"black\"\n                    id=\"task-text\" class=\"text-h3 pb-2\" v-model=\"text\" solo no-resize hide-details rows=\"5\">\n                </v-textarea>\n            </div>\n\n            <!-- Variables chips section -->\n            <h3 class=\"ml-2 mb-1\"> Variables </h3>          \n                <div class=\"d-flex flex-row flex-wrap align-center ma-0 pa-0 minus\">\n                    <div v-for=\"(variable, ind) in ext_text.task.variables\" :key=\"ind + 'v'\" class=\"ma-0 pa-0\">\n                        <v-chip v-if=\"variable.visible\" @click=\"variableInfo(ind)\"\n                            color=\"primary\" label class=\"mx-2 my-1 px-6 py-4 pointer elevation-1\">\n                            {{ variable.name.substr(1) }}\n                        </v-chip>\n                    </div>                    \n                    \n                    <!-- Add variable icon -->\n                    <div>\n                        <v-btn @click=\"addVariable()\" depressed class=\"no-uppercase\">\n                            <v-icon>mdi-plus</v-icon>\n                            Add Variable\n                        </v-btn>\n                    </div>\n                </div>\n\n                <!-- Answers chips section -->\n                <h3 class=\"ml-2\">Answers</h3>\n                    <div class=\"d-flex flex-row flex-wrap align-center ma-0 pa-0 minus\">\n                        <div v-for=\"(answer, i) in ext_text.task.answers\" :key=\"i + 'a'\" class=\"ma-0 pa-0\">\n                            <v-chip v-if=\"answer.visible\" @click=\"answerInfo(i)\"\n                                color=\"primary\" label class=\"mx-2 my-1 px-6 py-4 pointer\">\n                                {{ answer.name.substr(1) }}\n                            </v-chip>\n                        </div>\n                    </div>\n\n            <!-- PREVIEW -->\n            <v-overlay id=\"latexMath\" :value=\"taskOverlay\" :light=\"true\" :dark=\"false\">\n                <v-sheet \n                    elevation=\"4\" width=\"650\"\n                    style=\"height: 600px; overflow-y: auto\"\n                    class=\"pa-4 ma-2 d-flex flex-column justify-flex-start align-flex-start rounded-lg\">\n                    \n                    <v-btn plain icon @click=\"taskOverlay = false\" class=\"close-button mt-4 mr-6 pa-0 shrink\">\n                        <v-icon color=\"danger\">mdi-close</v-icon>\n                    </v-btn>\n\n                    <h3 class=\"ma-2 pa-1\"> {{ preview.text.trim() }} </h3>\n                    <div class=\"d-flex flex-column ma-2 pa-1\" v-for=\"(q, i) in preview.questions\" :key=\"'q' + i\">\n                        \n                        <h4 class=\"ma-1\"> {{ replaceAnswers(q.text.trim()) }} </h4>\n\n                        <div class=\"ma-1 pa-1\" v-for=\"(a, i) in q.answers\" :key=\"'a' + i\">\n                            <p v-for=\"(item, index) in a.correct\" :key=\"index\"> a) {{item}} </p>\n                            <p v-for=\"(item, index) in a.incorrect\" :key=\"'ia' + index\"> \n                                {{ String.fromCharCode(98 + index) + ')'}} {{item}} \n                            </p>\n                        </div>\n                    </div>\n                </v-sheet>\n            </v-overlay>\n\n            </v-col>\n            \n            <!-- Right side -->\n            <v-col cols=\"16\" class=\"mx-2 pa-0 d-flex flex-column justify-space-between\">\n\n            <!-- Questions section -->\n            <div class=\"d-flex flex-column justify-start flex-grow-0\">\n                <h3 class=\"ml-2 mb-0\"> Questions </h3>\n                <div class=\"d-flex flex-column justify-start\" style=\"height: 220px; overflow-y: auto\">\n                    <div\n                        class=\"d-flex flex-row align-center\" \n                        v-for=\"(question, i) in ext_text.task.questions\" :key=\"i\">\n                        <v-text-field\n                            :label=\"'Task question #' + i\"\n                            placeholder=\"eq.: What is the result? @res\"\n                            solo hide-details color=\"error\"\n                            class=\"my-1 d-flex flex-grow-1\"\n                            v-model=\"ext_text.task.questions[i].text\">\n                            <template v-slot:append>\n                                <v-icon color=\"error\" @click=\"removeQuestion(i)\">mdi-delete-empty</v-icon>\n                            </template>\n                        \n                        </v-text-field>\n                    </div>\n                    <!-- Add question button -->\n                    <v-btn @click=\"addQuestion\" depressed class=\"my-1 no-uppercase align-self-start\">\n                        <v-icon>mdi-plus</v-icon>  \n                        Add Question \n                    </v-btn>\n                </div>\n            </div>\n            <div class=\"d-flex flex-row mt-2 mb-1 justify-self-end justify-end\">\n                <v-btn large class=\"px-6 py-2 mx-2 no-uppercase\" @click=\"parseText\">Evaluate</v-btn>\n                <v-btn large class=\"px-6 py-2 mx-2 no-uppercase\" @click=\"previewTask\">Preview</v-btn>\n                <v-btn elevation=\"2\" large color=\"primary\"\n                class=\"px-6 py-2 mx-2 no-uppercase\" @click=\"getCategories(); overlaySave = true\"> Save\n                </v-btn>\n                <!-- <v-btn class=\"mx-1\" @click=\"restoreText\">Restore</v-btn> -->\n            </div>\n\n            </v-col>\n        </v-container>\n\n        <!-- Make this a dialog...variale dialog -->\n        <v-overlay tabindex=\"0\" @keydown.esc=\"overlayV = false\"\n            :value=\"overlayV\" :light=\"true\" :dark=\"false\" v-if=\"ext_text.task.variables.length != 0\">\n            <v-sheet \n                elevation=\"4\" width=\"500\" \n                class=\"pa-4 ma-2 mt-0 pt-2 d-flex flex-column justify-flex-start align-flex-start rounded-lg\">\n                <!-- Close icon -->\n                <v-btn plain icon @click=\"overlayV = false\" class=\"close-button mt-4 mr-6 pa-0 shrink\">\n                    <v-icon color=\"danger\">mdi-close</v-icon>\n                </v-btn>\n                <!-- Delete variable -->\n                <v-btn \n                    v-if=\"ext_text.task.variables[indexV].added\"\n                    icon @click=\"overlayV = false; removeVariable(indexV)\"\n                    class=\"close-button mt-4 mr-14 pa-0 shrink\">\n                    <v-icon color=\"red\">mdi-delete</v-icon>\n                </v-btn>\n\n                <h2 class=\"ma-2 mt-3\" :contenteditable=\"ext_text.task.variables[indexV].added\"> \n                    {{ ext_text.task.variables[indexV].name }} \n                </h2>\n                \n                <p class=\"ma-2\"> Definition </p>\n                <v-text-field \n                    label=\"\" placeholder=\"e.g.: ( $a * 2 ) + 1\" \n                    v-model=\"ext_text.task.variables[indexV].definition\" \n                    outlined dense class=\"shrink mx-2\"> \n                    {{ ext_text.task.variables[indexV].definition }} \n                </v-text-field>\n                \n                <p class=\"ma-2 mt-0\"> Range {{ ext_text.task.variables[indexV].range.fullRange() }} </p>\n                <v-row class=\"d-flex flex-row flex-nowrap px-3\">\n                    <v-text-field \n                        label=\"Start\" v-model=\"ext_text.task.variables[indexV].range.start\" \n                        outlined dense class=\"shrink mx-2 mt-3\">\n                    </v-text-field>\n                    <v-text-field \n                        label=\"End\" v-model=\"ext_text.task.variables[indexV].range.end\" \n                        outlined dense class=\"shrink mx-2 mt-3\">\n                    </v-text-field>\n                    <v-text-field \n                        label=\"Step\" v-model=\"ext_text.task.variables[indexV].range.step\"\n                        outlined dense class=\"shrink mx-2 mt-3\">\n                    </v-text-field>\n                </v-row>\n            </v-sheet>\n        </v-overlay>\n\n        <!-- Answer overlay -->\n        <v-overlay\n            :light=\"true\" :dark=\"false\"\n            :value=\"overlayA\" v-if=\"ext_text.task.answers.length != 0\">\n            <v-sheet \n            elevation=\"4\" width=\"500\" \n            height=\"500px\"\n            class=\"pa-4 ma-2 mt-0 pt-2 d-flex flex-column justify-flex-start align-flex-start rounded-lg overflow-y-auto\">\n            <!-- Close icon -->\n            <v-btn plain icon @click=\"overlayA = false\" class=\"close-button mt-4 mr-6 pa-0 shrink\">\n                <v-icon color=\"danger\">mdi-close</v-icon>\n            </v-btn>\n            <h2 class=\"ma-2 mt-3\"> \n                {{ ext_text.task.answers[indexA].name }}\n            </h2>\n\n            <p class=\"ma-2 mt-0\"> Range {{ ext_text.task.answers[indexA].range.fullRange() }} </p>\n            <v-row class=\"d-flex flex-row flex-nowrap px-3 shrink\">\n                <v-text-field \n                    label=\"Start\" v-model=\"ext_text.task.answers[indexA].range.start\" \n                    outlined dense class=\"shrink mx-2 mt-3\">\n                </v-text-field>\n                <v-text-field \n                    label=\"End\" v-model=\"ext_text.task.answers[indexA].range.end\" \n                    outlined dense class=\"shrink mx-2 mt-3\">\n                </v-text-field>\n            </v-row>\n\n            <p class=\"ma-2 mt-0\">Correct</p>\n            <div \n                class=\"d-flex flex-row\" \n                v-for=\"(el, i) in ext_text.task.answers[indexA].correct\" :key=\"'el_c' + i\">\n                <v-text-field \n                    label=\"\" \n                    placeholder=\"e.g.: ( $a * 2 ) + 1\" \n                    v-model=\"ext_text.task.answers[indexA].correct[i]\" \n                    outlined dense class=\"mx-2 my-0\"> \n                    {{ el }}\n                </v-text-field>\n                <v-btn\n                    @click=\"removeCorrect(i)\" \n                    icon plain color=\"red\" class=\"mx-2\">\n                    <v-icon>mdi-delete-empty</v-icon>\n                </v-btn>\n            </div>\n            <v-btn depressed class=\"mx-2\" @click=\"addCorrect\">\n                <v-icon>mdi-plus</v-icon>\n                Add correct answer\n            </v-btn>\n\n            \n            <p class=\"ma-2\">Incorrect</p>\n            <div \n                class=\"d-flex flex-row\" \n                v-for=\"(el, i) in ext_text.task.answers[indexA].incorrect\" :key=\"'el_ic' + i\">\n                <v-text-field \n                    label=\"\" \n                    placeholder=\"e.g.: ( $a * 2 ) + 1\" \n                    v-model=\"ext_text.task.answers[indexA].incorrect[i]\" \n                    outlined dense class=\"mx-2 my-0\"> \n                    {{ ext_text.task.answers[indexA].incorrect }}\n                </v-text-field>\n                <v-btn \n                    @click=\"removeIncorrect(i)\"\n                    icon plain color=\"red\" class=\"mx-2\">\n                    <v-icon>mdi-delete-empty</v-icon>\n                </v-btn>\n            </div>\n            <v-btn depressed class=\"mx-2\" @click=\"addIncorrect\">\n                <v-icon>mdi-plus</v-icon>\n                Add incorrect answer\n            </v-btn>\n            \n            </v-sheet>\n        </v-overlay>\n\n        <!-- Answer type options dialog -->\n        <v-dialog v-model=\"overlaySave\" width=\"450\" :retain-focus=\"false\">\n            <v-card class=\"d-flex flex-column rounded-lg pt-2\">\n                <p class=\"pb-4 my-2 font-weight-medium text-h5 align-self-center\"> Task details</p>\n\n                <!-- Set task name -->\n                <v-text-field \n                    class=\"px-4\" v-model=\"taskName\" outlined label=\"Task name\" placeholder=\"Enter task name\">\n                </v-text-field>\n\n                <!-- Select grade -->\n                <v-select \n                    class=\"px-4\" :items=\"$store.state.test.grades\" v-model=\"taskGrade\" outlined label=\"Grade\">\n                </v-select>\n\n                <!-- Set categories to task -->\n                <v-combobox class=\"px-4\" label=\"Categories\" v-model=\"selectedTaskCategories\" \n                    :items=\"taskCategories\" multiple chips outlined>\n                    <template v-slot:selection=\"data\">\n                        <v-chip color=\"primary\" class=\"pa-2\" v-bind=\"data.attrs\">\n                        {{ data.item }}\n                        </v-chip>\n                    </template>\n                </v-combobox>\n\n                <v-divider></v-divider>\n\n                <v-card-actions>\n                    <v-spacer></v-spacer>\n                    <v-btn color=\"black\" outlined text @click=\"overlaySave= false\"> Cancel </v-btn>\n                    <v-btn dark color=\"primary\" @click=\"saveText(); overlaySave = false\"> Save </v-btn>\n                </v-card-actions>\n                \n            </v-card>\n        </v-dialog>\n\n        <v-dialog v-model=\"helpDialog\" width=\"450\" :retain-focus=\"false\">\n            <v-card class=\"d-flex flex-column rounded-lg pt-2\">\n                <v-card-title> Task creation process </v-card-title>\n\n                <v-card-text>\n                    (You can check out other created tasks in the Your tasks page when you click modify) <br>\n                    1. Define task text <br>\n                        $variable_name will be replaced with a concrete value once defined <br>\n                    2. Click the Evaluate button when you want to define variables or answers <br>\n                    3. Add and define a question text, @answer_name will be replaced by the defined asnwer options <br>\n                    4. Under Variables section, you can set the ranges for each variable <br>\n                    5. Under Answers section, you can set a template for each answer correct and incorrect <br>\n                    6. Hit Preview to see how the task looks like <br>\n                    7. hit Save when you are done, set Task grade and categories <br>\n\n                </v-card-text>\n\n                <v-divider></v-divider>\n\n                <v-card-actions>\n                    <v-spacer></v-spacer>\n                    <v-btn dark color=\"primary\" @click=\"helpDialog = false\"> Okay </v-btn>\n                </v-card-actions>\n                \n            </v-card>\n        </v-dialog>\n\n    </v-container>\n</template>\n\n<script>\n    import { tokenize, Token } from \"../myfiles/tokenizer.js\"\n    import { parseMathLang, Question, ConcreteTask, Variable } from \"../myfiles/taskHandler\"\n    import { Extractor } from \"../myfiles/extractorModule\";\n\n    import TaskDataService from \"../services/taskDataService\";\n    import GeneratorService from \"../services/generatorService\";\n    import CategoryDataService from \"../services/categoryDataService.js\";\n\n    import * as math from 'mathjs';\nimport testDataService from '../services/testDataService.js';\n\n    export default {\n        data() {   \n            return {\n                taskCategories: [],\n                selectedTaskCategories: [],\n                \n                name: \"New Task\",\n                taskName: \"\",\n                taskGrade: null,\n                text: \"\",\n                task_text: \"\",\n\n                formula: '$$x = {-b \\\\pm \\\\sqrt{b^2-4ac} \\\\over 2a}.$$',\n\n                ext_text: new Extractor(),\n                preview: new ConcreteTask(),\n                \n                variables: [],\n                questions: [],\n                answers: [],\n\n                overlayV: false,\n                overlayA: false,\n                overlayAddV: false,\n                overlaySave: false,\n                taskOverlay: false,\n                helpDialog: false,\n                indexV: 0,\n                indexAV: 0,\n                indexA: 0,\n            };\n        },\n        computed: {\n            getText() { return this.text; }\n        },\n\n        // Load task depending on navigation origin\n        beforeMount() {\n            console.log(\"taskId from route params\", localStorage.getItem('taskId'))\n\n            // Modify was selected from task history\n            if( this.$route.params.taskId ) \n            {\n                // Save id to localStorage, so we can reload page without lossing the id\n                localStorage.setItem('taskId', this.$route.params.taskId)\n            }\n\n            // Id was saved from route params or if the page was reloaded\n            if ( localStorage.getItem('taskId') )\n            {\n                // Load the task content from the database\n                TaskDataService.get(localStorage.getItem('taskId'))\n                    .then((res) => {\n                        console.log(res);\n\n                        try {\n                            this.name = res.data.name;\n                            this.taskName = res.data.name;\n                            this.taskGrade = res.data.grade;\n                            this.ext_text.task = parseMathLang(res.data.content);\n                            res.data.categories.forEach(({name}) => {\n                                this.selectedTaskCategories.push(name);\n                            });\n\n                            console.log('RECIEVED: ', res.data);\n                            this.$store.dispatch('showMessage', { message: \"Parsing successful!\" });\n\n                        } catch (error) {\n                            this.$store.dispatch('showMessage', { message: error.message, success: false });\n                        }\n                        // this.ext_text.task = parseMathLang(res.data.content);\n\n                        this.text = this.ext_text.task.text.trim();\n                    })\n                    .catch((error) => { \n                        this.errorHandler(error); \n                    });\n            }\n\n            // Get categories\n            CategoryDataService.getAll().then(({data}) => {\n                this.taskCategories = data.map(({name}) => name);\n            })\n        },\n\n        mounted() { },\n\n        created() { },\n\n        methods: {\n\n            getCategories() {\n                CategoryDataService.getAll().then(({data}) => {\n                    this.taskCategories = data.map(({name}) => name);\n                });\n            },\n\n            replaceAnswers(_qText) {\n\n                try {\n                    let cleanText = _qText.replaceAll(Token.types.gAnswer, \"\").replaceAll(\"=\", \"\").trim();\n                    return math.parse(cleanText).toTex();\n                } catch(error) {\n                    return _qText;\n                }\n            },\n\n            testext() {\n                // Test extraction\n                this.ext_text.extractVariable(tokenize(this.text));\n            },\n\n            async createNewTask() \n            {\n                // Prepare data for sending\n                var data = { name: this.taskName, grade: this.taskGrade, content: this.ext_text.generateText() };\n\n                // Create new entry in database\n                if ( localStorage.getItem('taskId') == null) {\n                    \n                    try{\n                        let newTask = await TaskDataService.create(data);\n\n                        localStorage.setItem('taskId', newTask.data.id);\n\n                        console.log(this.selectedTaskCategories);\n\n                        for(let selectedCategory of this.selectedTaskCategories) {\n                            let category = await CategoryDataService.find({name: selectedCategory});\n\n                            // check\n                        }\n\n                        this.$store.dispatch('showMessage', { message: \"Task saved successfuly\" });\n                    } catch(error) {\n                        // log\n                        this.$store.dispatch('showMessage', { message: error.response.data.message, success: false });\n                    }\n                    }\n\n                // Update existing entry\n                else {    \n\n                    let taskId = localStorage.getItem('taskId');\n                    let task = await TaskDataService.get(taskId);\n\n                    try{\n                        // Delete each category on the task\n                        for(let category of task.data.categories) {\n                            TaskDataService.removeCategory({ taskId: taskId, categoryId: category.id });\n                        }\n                    } catch(error) {\n                        //\n                        console.log(\"Error while deleting categories from task\");\n                    }\n\n                    // Add each selectedCategory to task\n                    for(let selectedCategory of this.selectedTaskCategories) {\n\n                        try {\n                            // Find category id in DB\n                            let category = await CategoryDataService.find({name: selectedCategory}); \n                            \n                            // Add category to task\n                            await TaskDataService.addCategory(\n                                { taskId: taskId, categoryId: category.data.id }\n                            )\n                        } catch(error) {\n\n                            // Create category\n                            let category = await CategoryDataService.create({name: selectedCategory});\n                            \n                            // Add category to task\n                            await TaskDataService.addCategory(\n                                { taskId: taskId, categoryId: category.data.id }\n                            )\n\n                            console.log(\"Added\");\n                        }\n                    }\n\n\n                    TaskDataService.update( localStorage.getItem('taskId'), data ) \n                        .then((res) => {\n                            console.log(res);\n                            this.$router.push({name: \"yourTasks\"});\n                            this.$store.dispatch('showMessage', { message: res.data.message });\n                        })\n                        .catch((err) => {\n                            this.$store.dispatch('showMessage', { message: err.response.data.message, success: false });\n                        })\n                }\n            },\n\n            variableInfo : function(i) {\n                this.indexV = i\n                this.overlayV = true\n            },\n            addedVariableInfo: function(i) {\n                this.indexAV = i\n                this.overlayAddV = true;\n            },\n            answerInfo: function(i) {\n                this.indexA = i\n                this.overlayA = true\n            },\n            previewTask: function () {\n\n                GeneratorService\n                    .generate( { content: this.ext_text.task } )\n                    .then((res) => {\n                        this.preview = res.data.content;\n                        this.message = res.data.message;\n                        this.success = true;\n                        this.infoMessage = true;\n\n                        this.taskOverlay = true\n\n                        //initMathJax({}, () => { renderByMathjax(document.getElementById('task')); });\n                        localStorage.setItem('data', this.ext_text.generateText() );\n                    })\n                    .catch((err) => {\n                        this.message = err?.response?.data?.message || err.message;\n                        this.success = false;\n                        this.infoMessage = true;\n                    });\n            },\n            saveText: function() {\n                localStorage.setItem('data', this.text);\n\n                this.createNewTask();\n            },\n            restoreText: function() {\n                // TODO ?\n            },\n\n\n            // Variables\n            addVariable: function() {\n                let newVariable = new Variable(\"$newVar\");\n                newVariable.added = true;\n                \n                this.ext_text.task.variables.push(newVariable);\n            },\n            setVariableName: function(e) {\n                this.ext_text.task.variables[this.indexV].name = e.target.innerText;\n            },\n            removeVariable: function(i) {\n                this.ext_text.task.variables.splice(i, 1);\n            },\n\n            // Questions\n            addQuestion: function() {\n                this.ext_text.task.questions.push(new Question());\n            },\n            removeQuestion: function(i) {\n                this.ext_text.task.questions.splice(i, 1);\n            },\n\n            // Answers\n            addCorrect: function() {\n                this.ext_text.task.answers[this.indexA].correct.push(new String(\"\"));\n            },\n            removeCorrect: function(i) {\n                this.ext_text.task.answers[this.indexA].correct.splice(i, 1);\n            },\n            addIncorrect: function() {\n                this.ext_text.task.answers[this.indexA].incorrect.push(new String(\"\"));\n            },\n            removeIncorrect: function(i) {\n                this.ext_text.task.answers[this.indexA].incorrect.splice(i, 1);\n            },\n\n            parseText : function () {\n\n                // TEXT\n                this.ext_text.task.text = this.text;\n\n                let tokens = tokenize(this.text);\n\n                // VARIABLES\n                this.variables = this.ext_text.extractVariables(tokens);\n\n                // ANSWERS\n                this.answers = this.ext_text.extractAnswers(tokens);\n\n                // Extract answer from each question\n                \n                // Assume list of variables has changed\n                // and set visiblity to false for all variables\n                this.ext_text.task.answers.forEach((answer) => {\n                    answer.visible = false;\n                });\n                // QUESTIONS\n                this.ext_text.task.questions.forEach((question) => {\n\n                    //console.log('Q',question);\n                    //console.log(tokenize(\"Q: \", question.text));\n\n                    this.ext_text.extractAnswers(tokenize(question.text));\n                });\n\n                try{\n                    let generated_text = this.ext_text.generateText();\n                    this.$store.dispatch('showMessage', {message: \"Successfuly evaluated!\"});\n                    //console.log(generated_text);\n                } catch(err) {\n                    this.$store.dispatch('showMessage', {message: err.message, success: false});\n                }\n            }     \n        }\n    }\n</script>\n\n<style>\n    [text-narrow] {\n        line-height: 1.1 !important;\n        font-size: 1rem;\n    }\n\n    .pointer {\n        cursor: pointer !important;\n    }\n\n    .close-button {\n        position: absolute !important;\n        top: 0rem !important;\n        right: 0rem !important;\n    }\n\n</style>"]}]}